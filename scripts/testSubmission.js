let data = "0x000000000000000000000000000000000000000000000000000000000000000100000000000000000000000011c2fa5b8e0733c1aab877da8b6d3f44510638eb00000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000006101191900000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000037a8c84f31a0000000000000000000000000000000000000000000000000000003485d30ae000000000000000000000000000000000000000000000000000000007356543c000000000000000000000000000000000000000000000000000000000077f3a120000000000000000000000000000000000000000000000000000000121be83c80000000000000000000000000000000000000000000000000000000003cdb588000000000000000000000000000000000000000000000000000000000134fad400000000000000000000000000000000000000000000000000000000538951ed000000000000000000000000000000000000000000000000000000006e40904800000000000000000000000000000000000000000000000000000000a41db08e0000000000000000000000000000000000000000000000000000000b91c5ce600000000000000000000000000000000000000000000000000000000319f6b320000000000000000000000000000000000000000000000000000000007151d3a00000000000000000000000000000000000000000000000000000000006126e56000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002c000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000440000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000000000000000000000000000000000000004c0000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000036274630000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000365746800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003626e6200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003616461000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036574630000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000378727000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004646f6765000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003646f7400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003756e6900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003736f6c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003626368000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000036c7463000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046c696e6b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000056d61746963000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b6274632d6574682d626e622d6164612d6574632d7872702d646f67652d646f742d756e692d736f6c2d6263682d6c74632d6c696e6b2d6d617469630000000000"
let Signer = require('./signPriceData')
require('dotenv').config()
let submitter = process.env.PRIVATE_KEY

const PrivateKeyProvider = require("truffle-privatekey-provider");

let Web3 = require('web3')
const web3 = new Web3(new PrivateKeyProvider(submitter, "https://data-seed-prebsc-1-s3.binance.org:8545/"))

const ABI = require('../abi/MultiPriceFeedOracleV2.json')

let Sig = Signer.ethSignMessage2(data)
let decoded = web3.eth.abi.decodeParameters([
    { type: 'uint32', name: 'roundId' },
    { type: 'address', name: 'contractAddress' },
    { type: 'int256[]', name: 'prices' },
    { type: 'uint256', name: 'deadline' },
    { type: 'string[]', name: 'tokens' },
    { type: 'string', name: 'description' },
], data)

async function main() {
    const accounts = await web3.eth.getAccounts()
    const account = accounts[0]
    let ct = await new web3.eth.Contract(ABI, decoded.contractAddress)
    let tokenList = await ct.methods.getTokenList().call()
    console.log('token list', decoded.tokens, tokenList)
    console.log('submitting')
    await ct.methods.submit(decoded.roundId, decoded.prices, decoded.deadline, Sig.r, Sig.s, Sig.v).send({ from: account, gas: 1000000, gasPrice: 20000000000 })
}

main()



